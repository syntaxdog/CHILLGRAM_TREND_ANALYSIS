# 식품 패키지 디자인 트렌드 키워드 추출 파이프라인

## 목표
소셜미디어 텍스트 데이터를 분석하여, 가공식품 패키지 디자인에 직접 반영 가능한 트렌드 키워드 20개를 도출한다.

### 최종 산출물 예시
> "말차", "발렌타인데이", "뉴트로", "제로슈거", "두바이초콜릿", "벚꽃", "캠핑" ...
> → 디자이너가 보고 패키지 콘셉트 방향을 잡을 수 있는 트렌드 키워드

### 키워드 선정 기준
패키지 디자인의 콘셉트·방향성을 촉발할 수 있으면 유효한 키워드다:
- **트렌드 맛/원료** — 말차, 두바이초콜릿, 흑임자, 제로슈거, 프로틴
- **시즌/이벤트** — 발렌타인데이, 벚꽃시즌, 크리스마스, 빼빼로데이
- **비주얼/감성** — 뉴트로, 미니멀, 프리미엄, Y2K, 힐링
- **라이프스타일** — 비건, 헬시플레저, 캠핑, 혼술, 홈카페
- **소재/구조** — 크래프트지, 투명, 소분, 미니사이즈

"맛있다", "추천", "가성비", "배송" 같은 단어는 디자인 방향으로 전환할 수 없으므로 제외 대상이다.

---

## Phase 0. 프로젝트 정의

### 타겟 설정
- **제품군:** 과자, 스낵류 등 가공식품
- **타겟 소비자:** (프로젝트 시작 전 정의 — 예: 2030 여성, MZ세대 등)
- **분석 기간:** 최근 6개월~1년

> 타겟에 따라 데이터 수집 검색어가 달라지므로, 이 단계를 반드시 먼저 수행한다.

---

## Phase 1. 데이터 수집 (텍스트만)

| 소스 | API / 방법 | 수집 대상 | 역할 |
|------|-----------|-----------|------|
| 네이버 블로그 | 네이버 검색 API | 신제품 리뷰, 패키지 언급 게시글 | **주력** — 국내 식품 트렌드 텍스트 가장 풍부 |
| YouTube | Data API v3 | 편의점 신상/언박싱 영상 제목·설명·댓글 | **보조** — 영상 기반 트렌드 용어 포착 |
| Google Trends | pytrends | 키워드 검색량 추이 | **검증** — 키워드가 실제로 상승세인지 확인 |

### 검색 키워드 예시
```
"과자 패키지 디자인", "신상 과자", "편의점 신상",
"패키지 예쁜", "포장 디자인", "과자 리뷰"
```

> Instagram, Pinterest, 쇼핑몰 리뷰는 제외.
> - Instagram: API 데이터 접근 제한이 심함
> - Pinterest: 이미지 기반이라 텍스트 키워드 추출에 부적합
> - 쇼핑몰 리뷰: "배송", "파손" 등 QC 피드백 위주로 디자인 트렌드와 무관

---

## Phase 2. 전처리

```
원문 → 정규화(특수문자·이모지 제거)
     → Mecab 형태소 분석
     → 불용어 제거
     → 부정 문맥 필터링
     → 정제된 토큰
```

### 형태소 분석기
- **Mecab** (`python-mecab-ko`)

### 사용자 사전 등록 (필수)
디자인 관련 용어를 Mecab이 인식하도록 등록:
```
뉴트로, 클린라벨, 제로슈거, 헬시플레저, 그라데이션,
파스텔톤, 어스톤, 크래프트지, 산세리프, 미니멀리즘,
이지컷, 스탠딩파우치, 지퍼백
```

### 불용어 사전 (도메인 특화)
디자인과 무관한 고빈도 단어 제거:
```
맛있다, 추천, 먹방, 구매, 배송, 가격, 할인,
가성비, 편의점, 마트, 리뷰, 후기, 솔직
```

### 부정 문맥 필터링
- 부정어 사전("별로", "안 좋", "불편", "과대포장", "뜯기 힘들")이 포함된 문장은 제거
- 목적: 소비자가 싫어하는 요소가 트렌드 키워드로 잘못 추출되는 것 방지

---

## Phase 3. 키워드 추출

### 3-1. TF-IDF (1차 필터링)
- scikit-learn `TfidfVectorizer`
- 월 단위로 문서를 묶어 시계열 분석 가능하게 구성
- **상위 100개 키워드** 추출

### 3-2. KeyBERT (2차 정제)
- 모델: `ko-sroberta-multitask`
- TF-IDF 상위 100개를 후보군으로, 문맥 유사도 기반 핵심 키워드 **50개** 선정
- MMR(Maximal Marginal Relevance) 적용 — `diversity=0.5` 부터 테스트
- 키워드 간 중복 최소화 (예: "미니멀"과 "미니멀리즘" 중복 방지)

### 3-3. 디자인 콘셉트 적합성 필터링 (핵심 단계)
50개 후보에서 **패키지 디자인 콘셉트로 전환 가능한 키워드만** 남긴다.

**필터링 기준:**
- 이 키워드를 듣고 디자이너가 색감, 일러스트, 레이아웃 등의 방향을 떠올릴 수 있는가?
- 예: "말차" → 그린톤 + 자연 감성 + 일본풍 (O)
- 예: "가성비" → 디자인으로 전환 불가 (X)

**필터링 방법:**
1. Phase 0에서 정의한 5개 카테고리(트렌드맛·원료 / 시즌·이벤트 / 비주얼·감성 / 라이프스타일 / 소재·구조)에 매핑 시도
2. 어디에도 매핑되지 않는 키워드는 제거
3. LLM(Claude API)을 활용한 반자동 분류:
   ```
   다음 키워드가 식품 패키지 디자인의 콘셉트 방향으로 활용 가능한지 판단하라.
   활용 가능하면 카테고리(트렌드맛·원료 / 시즌·이벤트 / 비주얼·감성 / 라이프스타일 / 소재·구조)를 지정하라.
   활용 불가능하면 "제외"로 표시하라.

   키워드: [후보 리스트]
   ```

---

## Phase 4. 트렌드 추이 분석

### 4-1. 키워드 빈도 추이
- 월별 출현 빈도를 시계열로 시각화
- **상승 / 하강 / 안정** 자동 분류:
  - 최근 3개월 이동평균 > 전체 평균 × 1.5 → 상승
  - 최근 3개월 이동평균 < 전체 평균 × 0.5 → 하강
  - 그 외 → 안정

### 4-2. Google Trends 교차 검증
- 추출된 키워드의 검색량 추이를 Google Trends로 확인
- 블로그에서만 뜨고 실제 검색량은 없는 키워드 제거

### 4-3. 트렌드 예측
- **데이터 6개월 미만:** 이동평균 + 선형 회귀 기울기로 방향성 판단
- **데이터 1년 이상 축적 시:** Prophet으로 전환하여 계절성 반영 예측

---

## Phase 5. 최종 키워드 20개 선정

### 선정 기준 (가중 합산)
| 기준 | 비중 | 설명 |
|------|------|------|
| 트렌드 상승세 | 40% | 빈도 증가율 + Google Trends 검증 |
| 디자인 반영 가능성 | 30% | 6개 카테고리 매핑 명확도 |
| 키워드 다양성 | 20% | 카테고리별 균형 (한 카테고리 편중 방지) |
| 참신성 | 10% | 이미 업계에서 보편화된 키워드보다 새로운 키워드 우선 |

### 산출물
```
순위 | 키워드 | 카테고리 | 트렌드 방향 | 근거 요약
1    | ○○○   | 감성/무드 | ↑ 상승     | 최근 3개월 출현빈도 230% 증가
2    | ○○○   | 비주얼   | ↑ 상승     | Google Trends 검색량 동반 상승
...
20   | ○○○   | 소재/질감 | → 안정     | 꾸준한 언급량 유지
```

---

## 기술 스택

| 영역 | 도구 |
|------|------|
| 데이터 수집 | Python requests, 네이버 검색 API, YouTube Data API v3, pytrends |
| 전처리 | python-mecab-ko, pandas, re |
| 키워드 추출 | scikit-learn (TF-IDF), KeyBERT (ko-sroberta-multitask) |
| 디자인 필터링 | Claude API |
| 시계열 분석 | pandas (이동평균), scipy (선형회귀), Prophet (장기) |
| 시각화 | matplotlib, plotly |
| 환경 | Python 3.10+, Windows 11 |

---

## 작업 순서

```
1. 타겟 페르소나 및 검색 키워드 정의
2. 네이버 블로그 API 수집 스크립트 작성 + 테스트
3. YouTube 데이터 수집 스크립트 작성
4. Mecab 세팅 + 사용자 사전 + 불용어 사전 구축
5. 전처리 + 부정 문맥 필터링 구현
6. TF-IDF + KeyBERT 키워드 추출 파이프라인
7. 디자인 적합성 필터링 (LLM 활용)
8. 시계열 추이 분석 + Google Trends 교차검증
9. 최종 키워드 20개 선정 + 보고서 출력
```
